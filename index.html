#!/bin/bash -e

if [ ! -d openpilot ]; then
  git clone --recurse-submodules https://github.com/commaai/openpilot.git
fi

cd openpilot

if [[ "$OSTYPE" == "darwin"* ]]; then
  tools/mac_setup.sh
else
  tools/ubuntu_setup.sh
fi

git lfs pull

source .venv/bin/activate

scons -u -j$(nproc)
